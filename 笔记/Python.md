# Python

## 基础语法

------

### 字面量

**含义：** 代码中，被写在代码中固定的值

**数字类型（number）：**

| 描述              | 说明                         |
| ----------------- | ---------------------------- |
| 整数（`int`）     | `1, 2, 10, -1...`            |
| 浮点数（`float`） | `1.2, 3.14, -2.16`...        |
| 复数（`complex`） | `4+3j...`，以`j`结尾表示复数 |
| 布尔（`bool`）    | `false, true`                |

**字符串（String）：** 描述文本的一种数据类型，用引号（`'', "", """`）包裹

**列表（List）：** 有序的可变序列

**元组（Tuple）：** 有序的不可变序列

**集合（Set）：** 无序不重复集合

**字典（Dictionary）：** 无序的 Key-Value 集合

**print 输出语句：** `print()`

>   如果需要输出不换行，则 `print("字符串", end = '')`
>
>   换行符：`\t`

### 注释

**单行注释：** `# 注释内容`

**多行注释：** `""" 注释内容 """`

>   注释不参与代码运行

### 变量

**含义：** 用来存储数据用的，值可变

**定义格式：** `变量名 = 值`

### 数据类型

| 类型    | 描述   | 说明               | 类型转换  |
| ------- | ------ | ------------------ | --------- |
| `str`   | 字符串 | 用引号包裹的文本   | `str()`   |
| `int`   | 整型   | 数字类型，存储整数 | `int()`   |
| `float` | 浮点型 | 数字类型，存储小数 | `float()` |

**查询数据的类型：** `type()`

>   `type()` 查询的是数据的类型，因为变量没有类型
>
>   任何类型都可以转换成字符串，但是只有数字字符串才能转换成数字，浮点数转整数会丢失精度

### 标识符

**含义：** 编程时使用的名字

**规范：**

1.   只能出现字母、数字、下划线（`_`）
2.   不能以数字开头
3.   不能使用关键字
4.   见名知义
5.   多个单词组合用下划线分割
6.   变量名全小写

>   关键字：
>
>   `False	True	None	and	as	assert	break	class`
>
>   `continue   def	del	elif	else	except	finally	for`
>
>   `from	global	if	import	in	is	lambda	nonlocal`
>
>   `not	or	pass	raise	return	try	while	with	yield`	

### 运算符

**赋值运算符：**`=`

**比较运算符：**

| 运算符 | 描述       | 实例                  |
| ------ | ---------- | --------------------- |
| `==`   | 相等       | `3 == 3 结果为 True`  |
| `!=`   | 不相等     | `3 != 3 结果为 False` |
| `>`    | 大于       | `3 > 2 结果为 True`   |
| `<`    | 小于       | `3 < 2 结果为 False`  |
| `>=`   | 大于或等于 | `3 >= 2 结果为 True`  |
| `<=`   | 小于或等于 | `3 <= 2 结果为 False` |

**算术运算符：**

| 运算符 | 描述 | 实例                                   |
| ------ | ---- | -------------------------------------- |
| `+`    | 加   | `1 + 1 等于 2`                         |
| `-`    | 减   | `2 - 1 等于 1`                         |
| `*`    | 乘   | `2 * 2 等于 4`                         |
| `/`    | 除   | `6 / 2 等于 3`                         |
| `//`   | 取整 | `9 // 2 等于 4`，`9.0 // 2.0 等于 4.0` |
| `%`    | 取余 | `10 % 3 等于 1`                        |
| `**`   | 指数 | `2 ** 3 等于 8`                        |

**复合赋值运算符：**

| 运算符 | 描述           | 实例                      |
| ------ | -------------- | ------------------------- |
| `+=`   | 加法赋值运算符 | `a += b 等于 a = a + b`   |
| `-+`   | 减法赋值运算符 | `a -= b 等于 a = a - b`   |
| `*=`   | 乘法赋值运算符 | `a *= b 等于 a = a * b`   |
| `/=`   | 除法赋值运算符 | `a /= b 等于 a = a / b`   |
| `%=`   | 取余赋值运算符 | `a %= b 等于 a = a % b`   |
| `**=`  | 幂赋值运算符   | `a **= b 等于 a = a ** b` |
| `//=`  | 取整赋值运算符 | `a //= b 等于 a = a // b` |

### 字符串拓展

**三种定义方式：** 单引号（`''`）、双引号（`""`）、三引号（`"""`）

​	三引号支持换行，不用变量接收的话就是注释

**引号嵌套：** 使用转移符号反斜杠（`\`）可以让引号变成普通字符串

**拼接：** `+`

​	字符串无法与非字符串的变量拼接

**格式化：** 使用占位符拼接字符串

-   使用：`"我是%s，出生于%d年，身高为%f厘米" % ("挥殇", 2005, 170.3)`

| 占位符 | 说明             |
| ------ | ---------------- |
| `%s`   | 转化为字符串占位 |
| `%d`   | 转化为整数占位   |
| `%f`   | 转化为浮点数占位 |

-   精度控制：`m`控制整数长度，用空格补齐。`.n`控制小数长度，小数会四舍五入，用0补齐

    `"我是%2s，出生于%4年，身高为%3.1f厘米" % ("挥殇", 2005, 170.3)`

-   快速格式化：`f"文本{变量}文本{表达式}文本"`

    `"我是{"name"}，出生于{year}年，身高为{heigh}厘米{1 + 1}"`

### input 键盘录入

**语句：**`变量 = input()`

>   `input()` 录入的数据类型是 **字符串** 类型



## 流程控制语句

------

### if 条件判断语句

```python
if 判断条件1:
    语句体1
elif 判断条件2:
    语句体2
else:
    语句体3
```

>   `input()`可以写在判断条件中，if 语句可以嵌套使用

### while 循环语句

```python
while 条件:
    执行语句
```

### for 循环语句

```python
for 临时变量 in 待处理数据集
    执行语句
```

###　Range 语句

**语句1：**  `range(num)`

**含义：** 获取一个从0（包含0）开始到 num（不包含 num ）的数字序列

**语句2：** `range(num1, num2, step)`

**含义： ** 获取一个从 num1 开始到 num2（不包含） 结束的数字序列

**step：** 数字之间的步长，默认为1

>   循环语句可以嵌套使用，流程控制语句靠空格缩进识别语法

### break 和 continue

**break：** 结束本循环

**continue：** 跳过本次循环



## 函数

------

### 定义

**含义：** 组织好的，可重复使用的，用来实现特定功能的代码段代码段

```python
def 函数名(形式参数1, 形式参数2)
    函数体
    return 返回值
```

>   1.   参数和返回值如果不需要可以省略
>   2.   函数必须先定义后使用

**调用：** `函数名(实际参数1, 实际参数2)`

#### None 关键字

**含义：** `None`是类型 `NoneType`的字面量，表示空的、无意义的

-   函数没有使用 `return` 返回数据，函数默认返回值为 `None`
-   在 if 判断中，`None` 等于 `False`
-   定义变量是暂时不需要有具体值，可以用 `None` 代替

### 函数的说明文档

```python
def 函数名(参数1, 参数2):
    """
    函数说明
    :param 参数1: 参数1的说明
    :param 参数2: 参数2的说明
    :return:      返回值的说明
    """
    函数体
    return 返回值
```

-   通过多行注释的形式，对函数进行说明
-   内容应写在函数体之前
-   在PyCharm编写代码时，可以通过鼠标悬停，查看调用函数的说明文档
-   `:param`用于解释参数
-   `:return`用于解释返回值

>   函数可以嵌套使用

### 函数的作用域

**局部变量：** 定义在函数体内部的变量，只在函数体内部生效

**全局变量：** 在函数体内、外都能生效的变量

**global 关键字：** 如果要使用全局变量，使用 `global`关键字可以在函数内部声明变量为全局变量

### 函数的多个返回值

当有多个返回值时，需要定义多个变量接收

```python
def 函数名():
    return 返回值1, 返回值2

变量1, 变量2 = 函数名()
print(变量1)		# 结果：返回值1
print(变量2)		# 结果：返回值2
```

### 函数的多种传参方式

**位置参数：** 调用函数时，根据形式参数的位置和顺序来传递

**关键字参数：** 调用函数时，通过键值对形式传递。

**缺省参数：** 也叫默认参数。调用函数时，若没有实际参数，则使用默认参数。调用函数时可以不传递该参数的值，也可以修改参数的值

**不定长参数：** 也叫可变参数。调用函数时，若不确定参数的个数，则可以使用不定长参数

**不定长参数类型：** 位置传递、关键字参数
	位置传递：以`*`标记一个形参，所有不定长参数都会被 args 变量收集，algs 是元组
	关键字传递：以`**`标记一个形参，参数是键值对形式的情况下，都会被 kwargs 收集，kwargs 是字典

### lambda 匿名函数

函数作为参数传递时一种 **计算机逻辑传递** ，而非数据传递

`def`关键字可以定义带有名字的函数，可以重复使用

`lambda`关键字可以定义匿名函数，只可以临时使用一次

**语法：** `lambda 形式参数 : 一行函数体`



## 数据容器

------

### list 列表



**语法：** `变量名 = [元素1, 元素2, 元素3, ...]`

**定义空列表：** `变量名 = []`、`变量名 = list()`

>   1.   元素的类型没有限制，元素也可以是列表
>   2.   列表可以嵌套
>   3.   数据是有序的
>   4.   允许重复元素
>   5.   可以修改

**索引：** 如果需要取出特定位置的元素，可以使用下表索引（从零开始正序递增，从-1开始倒序递减）

-   一维列表：`列表[索引]`
-   二维列表：`列表[索引1][索引2]`

**列表的常用方法：**

| 方法名                    | 说明                                                |
| ------------------------- | --------------------------------------------------- |
| `列表.append(元素)`       | 追加元素                                            |
| `列表.extend(数据容器)`   | 将数据容器的内容依次取出并追加到列表中              |
| `列表.insert(索引, 元素)` | 在指定索引处插入指定元素                            |
| `del 列表[索引]`          | 删除列表指定索引的元素                              |
| `列表.pop(索引)`          | 删除列表指定索引的元素                              |
| `列表.remove(元素)`       | 删除列表中此元素的第一个匹配项                      |
| `列表.clear()`            | 清空列表                                            |
| `列表.count(元素)`        | 统计该元素在列表中出现的次数                        |
| `列表.index(元素)`        | 查找指定元素在列表中的索引，找不到报错 `ValueError` |
| `len(列表)`               | 统计列表内的元素数量                                |

**列表遍历：**

```python
# 遍历方式一：
index = 0
while index < len(列表):
    元素 = 列表[index]
    print(元素)
    index += 1
    
# 遍历方式2
for 临时变量 in 列表:
    print(临时变量)
```

### tuple 元组

**语法：** `变量名 = (元素1, 元素2, 元素3, ...)`

**定义空元组：** `变量名 = ()`、`变量名 = tuple()`

>   1.   元素的类型没有限制，元素也可以是列表
>   2.   列表可以嵌套
>   3.   数据是有序的
>   4.   允许重复元素
>   5.   不可以修改，但可以修改元组内的列表的内容

**元组常用方法：**

| 方法名             | 说明                         |
| ------------------ | ---------------------------- |
| `元组.index(元素)` | 查找指定元素在元组中的索引   |
| `元组.count(元素)` | 统计该元素在元组中出现的次数 |
| `len(元组)`        | 统计元组内的元素数量         |

**元组的遍历：**

```python
for 临时变量 in 元组:
    print(临时变量)
```

### str 字符串

**语法：** `变量名 = "字符串"`

>   1.   只能存储字符串
>   2.   数据是有序的
>   3.   允许重复元素
>   4.   不可以修改

**字符串常用方法：**

| 方法名                                         | 说明                                                 |
| ---------------------------------------------- | ---------------------------------------------------- |
| `字符串.replace("字符串1", "字符串2")`         | 将字符串1替换为字符串2，并返回一个新的字符串         |
| `字符串.split("分割符")`                       | 按照指定的分隔符划分字符串存入列表中并返回           |
| `字符串.strip()`<br />`字符串.strip("字符串")` | 去除字符串首尾的空格<br />去除字符串首尾的指定字符串 |
| `字符串.count("字符串")`                       | 统计该子字符串在父字符串中出现的次数                 |
| `len(字符串)`                                  | 统计字符串字符的个数                                 |

**字符串的遍历：**

```python
for i in 字符串:
    print(i)
```

### 序列

**含义：** 内容连续、有序、可以使用索引的数据容器

**序列的切片：** `序列[起始索引 : 结束索引 : 步长]`

1.   起始索引可以留空，默认 0 索引
2.   结束索引可以留空，默认最后一个索引
3.   反向取元素时，步长为负数，同时起始索引和结束索引也要反向标记

>   序列的切片会得到一个新的序列，不会影响序列本身

### set 集合

**语法：** `变量名 = {元素1, 元素2, 元素3, ...}`

**定义空集合：** `变量名 = set()`

>   1.   元素的类型没有限制，元素也可以是列表
>   2.   列表可以嵌套
>   3.   数据是无序的
>   4.   不允许重复元素
>   5.   可以修改
>   6.   不支持 while 循环遍历

**集合常用方法：**

| 方法名                           | 说明                                         |
| -------------------------------- | -------------------------------------------- |
| `集合.add(元素)`                 | 添加元素                                     |
| `集合.remove(元素)`              | 删除集合内指定元素                           |
| `集合.pop()`                     | 从集合中随机取出一个元素                     |
| `集合.clear()`                   | 清空集合                                     |
| `集合1.defference(集合2)`        | 取出集合1中，集合2没有的元素（差集）         |
| `集合1.defference_update(集合2)` | 删除集合1中，与集合2的相同的元素（交集）     |
| `集合1.union(集合2)`             | 合并集合1和集合2，并返回一个新的集合（并集） |
| `len(集合)`                      | 统计集合内元素的数量                         |

**集合的遍历：**

```python
for i in 集合:
    print(i)
```

### dict 字典

**语法：** `变量名 = {Key1 : Value, Key2 : Value, Key3 : Value, ...}`

>   1.   字典中每个元素都是键值对
>   2.   字典中的 Key 和 Value 可以是任何类型， Key 不可为字典
>   3.   字典的 Key 不允许重复，重复等于覆盖原有数据
>   4.   字典不是用索引，而是用 Key 检索 Value
>   5.   不支持 while 循环遍历

**字典常用方法：**

| 方法名              | 说明                      |
| ------------------- | ------------------------- |
| `字典[key]`         | 根据 Key 查询 Value       |
| `字典[Key] = Value` | 添加元素                  |
| `字典[Key] = Value` | 根据 Key 修改（更新）元素 |
| `字典.pop(Key)`     | 删除指定 Key 的元素       |
| `字典.clear()`      | 清空字典                  |
| `字典.keys()`       | 获取字典中全部的 Key      |
| `len(字典)`         | 统计字典内元素的数量      |

**字典的遍历：**

```python
for key in 字典.keys():
    print(key, ":", 字典[key])
```

### 数据容器对比

| 数据容器 |               列表               |                元组                |     字符串     |          集合          |             字典             |
| :------: | :------------------------------: | :--------------------------------: | :------------: | :--------------------: | :--------------------------: |
| 元素类型 |               任意               |                任意                |     仅字符     |          任意          |           仅键值对           |
| 下标索引 |               支持               |                支持                |      支持      |         不支持         |            不支持            |
| 重复元素 |               支持               |                支持                |      支持      |         不支持         |            不支持            |
| 可修改性 |               支持               |               不支持               |     不支持     |          支持          |             支持             |
| 数据有序 |                是                |                 是                 |       是       |           否           |              否              |
| 使用场景 | 可修改、可重复的一批数据记录场景 | 不可修改、可重复的一批数据记录场景 | 字符的记录场景 | 不可重复的数据记录场景 | 以Key检索Value的数据记录场景 |

#### 数据容器的通用操作

**遍历：** 5种数据容器都支持 for 循环遍历，集合、字典不支持 while 循环遍历

| 方法名                           | 说明                                     |
| -------------------------------- | ---------------------------------------- |
| `max(数据容器)`                  | 获取最大元素                             |
| `min(数据容器)`                  | 获取最小元素                             |
| `len(数据容器)`                  | 统计元素个数                             |
| `list(数据容器)`                 | 转换为列表                               |
| `tuple(数据容器)`                | 转换为元组                               |
| `str(数据容器)`                  | 转换为字符串                             |
| `set(数据容器)`                  | 转换为集合                               |
| `sorted(序列, [reverse = Ture])` | 排序并返回列表，Ture 为降序，False为升序 |

>   1.   字符串按 ASCII 码表确定大小
>   2.   字符串排序中，一位一位进行比较，只要其中一位大，那么改字符串就是大
>   3.   其他数据容器转换为字符串时，会保留其数据容器的格式



## 文件操作

------

### 打开文件

**语法：** `变量名 = open("路径", "访问模式", encoding = "编码格式")`

**访问模式：** 只读（`r`）、写入（`w`）、追加（`a`）

**编码格式：** 默认使用 UTF-8

>   1.   `encoding = ""` 位置不是第三位，所以用关键字参数
>   2.   此时定义变量是在创建文件对象

### 读取文件

| 方法名                                              | 说明                                           |
| --------------------------------------------------- | ---------------------------------------------- |
| `变量名 = open("路径", "r", encoding = "编码格式")` | 打开文件，模式为读取                           |
| `文件对象.read(数据长度)`                           | 读取指定文件长度，若不指定长度则读取全部       |
| `文件对象.readlines()`                              | 读取全部行数据，并返回列表，每个元素为每行数据 |
| `文件对象.readline()`                               | 读取单行数据                                   |
| `文件对象.flush()`                                  | 保存文件                                       |
| `文件对象.close()`                                  | 关闭文件，自动执行文件保存                     |
| `for line in open("文件路径"):`                     | for 循环获取每一行数据                         |
| `with open("文件路径") as f:`                       | 在 with open 中操作，结束后可自动关闭文件      |

### 写入文件

| 方法名                                              | 说明                 |
| --------------------------------------------------- | -------------------- |
| `变量名 = open("路径", "w", encoding = "编码格式")` | 打开文件，模式为写入 |
| `文件对象.write("写入内容")`                        | 写入指定字符串       |
| `文件对象.flush()`                                  | 保存文件             |

>   1.   在写入时，若文件不存在，会创建新的文件
>   2.   在写入时，若文件存在，会将原有内容清空

### 追加文件

| 方法名                                              | 说明                 |
| --------------------------------------------------- | -------------------- |
| `变量名 = open("路径", "a", encoding = "编码格式")` | 打开文件，模式为追加 |
| `文件对象.write("写入内容")`                        | 写入指定字符串       |
| `文件对象.flush()`                                  | 保存文件             |

>   1.   在追加时，若文件不存在，会创建新的文件写入
>   2.   在追加时，若文件存在，会在末尾追加数据



## 异常

------

### 异常的捕获方法

#### 捕获常规异常

```python
try:
    可能发生异常的代码块
except:
    处理该异常的代码块
```

#### 捕获指定异常

```python
try:
    可能发生异常的代码块
except 指定的异常类型 as 异常变量名:
    处理该异常的代码块
```

>   1.   发生的异常与指定的异常类型不一致时，无法捕获
>   2.   一般 try 中只放一行尝试执行的代码

#### 捕获多个异常

```python
try:
    可能发生异常的代码块
except(异常类型1, 异常类型2, 异常类型3, ...):
    处理该异常的代码块
```

#### 捕获所有异常

```python
try:
    可能发生异常的代码块
except [Exception as 异常变量名]:
    处理该异常的代码块
```

#### 异常 else

```python
try:
    可能发生异常的代码块
except Exception as 异常变量名:
    处理该异常的代码块
else:
    如果没有引发异常，则执行的代码块
```

#### 异常 finally

```python
try:
    可能发生异常的代码块
except Exception as 异常变量名:
    处理该异常的代码块
else:
    如果没有引发异常，则执行的代码块
finally:
    无论是否发生异常，都会执行代码块
```

>   异常具有传递性



## 模块 Module

------

**含义：** 模块是一个以 `.py` 结尾的 Python 文件，包含了类、函数、变量。通过将相关的代码组织在模块中，可以更好地管理和重用代码，以及提高程序的可读性和可维护性。

#### 导入方式

**导入一个模块：** `import 模块名`

**导入多个模块：** `import 模块1, 模块2, 模块3, ...`

**给模块指定别名：** `import 模块名 as 别名`

**导入模块中特定函数或变量：** `form 模块import 函数或变量`

>   导入模块中特定函数或变量时，不需要通过模块名来限定

#### 自定义模块

通过创建一个包含函数、类和变量定义的 `.py` 文件来实现，然后通过`import`语句在其他 Python 文件中使用它

**检查当前模块是否是作为主程序执行：** `if __name__ == "__main__":`

这样，当模块作为主程序运行时，测试代码会被执行；如果模块被导入到另一个模块中，测试代码则不会执行

**模块重名：** 当模块重名时，默认调用的是后面导入的模块

**精确控制模块中成员的导入行为：** `__all__ = ['函数1', '函数2', ...]`
	`__all__`是一个特殊的 Python 变量，用于定义一个模块中哪些成员会被`from 模块名 import *`导入。当你使用`from 模块名 import *`语句导入模块时，解释器会检查被导入模块中是否定义了`__all__`变量，如果有定义，那么只有`__all__`中列出的成员会被导入。



## 包 Package

------

**含义：** 是一种组织和管理模块的方式。是一个按照特定的层次结构组织在一起的包含了多个模块和子包的文件夹。一个包是一个包含了一个特殊文件`__init__.py`的目录

### 导入方式

**导入整个包：** `import 包名`

**导入包中的特定模块：** `import 包名.模块名`

**导入包中的特定模块并重命名：** `import 包名.模块名 as 别名`

**导入包中的所有模块：** `from 包名 import *`

>   `__all__`也可以定义模块，用来控制哪些模块可以被导入

### 安装第三方包

**终端命令：** `pip install 包名`

**链接清华大学镜像安装：** `pip install -i https://pypi.tuna.tsinghua.edu.cn/simple 包名`

#### 常用第三方包

| 包名                      | 作用       |
| ------------------------- | ---------- |
| `numpy`                   | 科学计算   |
| `pandas`                  | 数据分析   |
| `pyspark`、`apache-flink` | 大数据计算 |
| `matplotlib`、`pyecharts` | 图形可视化 |
| `tensorflow`              | 人工智能   |

